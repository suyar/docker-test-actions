name: Docker Test Actions

on:
  push:
    branches: [ main ]

  workflow_dispatch:

jobs:
  test:

    runs-on: ubuntu-latest

    steps:
      - name: test_fail
        id: need
        run: |
          docker pull php:8.1-cli-alpine
          digest=$(docker images -q -f reference=php:8.1-cli-alpine)
          echo ${digest}
          echo "::set-output name=digest::${digest}"

      - name: echo digest
        run: |
          echo ${{ steps.need.outputs.digest }}
